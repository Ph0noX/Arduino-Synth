
#include <avr/pgmspace.h>
#include <Synth.h>

// What shall we do with the drunk'n sailor

// TRACK 1
const byte track1_notes[] PROGMEM = { 
	71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 64, 128, 
	71, 128, 69, 128, 69, 128, 69, 128, 69, 128, 69, 128, 69, 128, 66, 128, 
	71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 73, 128, 
	76, 128, 71, 128, 69, 128, 64, 128, 64, 128, 71, 128, 71, 128, 71, 128, 
	71, 128, 64, 128, 71, 128, 69, 128, 69, 128, 69, 128, 62, 128, 69, 128, 
	71, 128, 71, 128, 71, 128, 74, 128, 76, 128, 71, 128, 66, 128, 64, 128, 
	71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 64, 128, 
	71, 128, 69, 128, 69, 128, 69, 128, 69, 128, 69, 128, 69, 128, 66, 128, 
	71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 73, 128, 
	76, 128, 71, 128, 69, 128, 64, 128, 64, 128, 71, 128, 71, 128, 71, 128, 
	71, 128, 64, 128, 71, 128, 69, 128, 69, 128, 69, 128, 62, 128, 69, 128, 
	71, 128, 71, 128, 71, 128, 74, 128, 76, 128, 71, 128, 66, 128, 64, 128, 
	71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 64, 128, 
	71, 128, 69, 128, 69, 128, 69, 128, 69, 128, 69, 128, 69, 128, 66, 128, 
	71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 73, 128, 
	76, 128, 71, 128, 69, 128, 64, 128, 64, 128, 71, 128, 71, 128, 71, 128, 
	71, 128, 64, 128, 71, 128, 69, 128, 69, 128, 69, 128, 62, 128, 69, 128, 
	71, 128, 71, 128, 71, 128, 74, 128, 76, 128, 71, 128, 66, 128, 64, 128, 
	71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 64, 128, 
	71, 128, 69, 128, 69, 128, 69, 128, 69, 128, 69, 128, 69, 128, 66, 128, 
	71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 71, 128, 73, 128, 
	76, 128, 71, 128, 69, 128, 64, 128, 64, 128, 71, 128, 71, 128, 71, 128, 
	71, 128, 64, 128, 71, 128, 69, 128, 69, 128, 69, 128, 62, 128, 69, 128, 
	71, 128, 71, 128, 71, 128, 74, 128, 76, 128, 71, 128, 66, 128, 76, 128
};
const word track1_timeOffsets[] PROGMEM = { 
	960, 162, 78, 40, 80, 40, 80, 190, 50, 50, 70, 40, 80, 240, 0, 282, 
	198, 260, 220, 40, 80, 52, 68, 190, 50, 42, 78, 50, 70, 242, 238, 250, 
	230, 190, 50, 40, 80, 40, 80, 200, 40, 50, 70, 50, 70, 240, 0, 242, 
	238, 260, 220, 230, 10, 260, 220, 400, 80, 270, 210, 432, 48, 320, 40, 50, 
	70, 220, 20, 270, 210, 250, 470, 310, 50, 42, 78, 240, 0, 270, 210, 260, 
	462, 308, 50, 50, 80, 270, 200, 240, 0, 270, 210, 242, 238, 260, 460, 300, 
	180, 162, 78, 40, 80, 40, 80, 190, 50, 50, 70, 40, 80, 240, 0, 282, 
	198, 260, 220, 40, 80, 52, 68, 190, 50, 42, 78, 50, 70, 242, 238, 250, 
	230, 190, 50, 40, 80, 40, 80, 200, 40, 50, 70, 50, 70, 240, 0, 242, 
	238, 260, 220, 230, 10, 260, 220, 400, 80, 270, 210, 432, 48, 320, 40, 50, 
	70, 220, 20, 270, 210, 250, 470, 310, 50, 42, 78, 240, 0, 270, 210, 260, 
	462, 308, 50, 50, 80, 270, 200, 240, 0, 270, 210, 242, 238, 260, 460, 300, 
	180, 162, 78, 40, 80, 40, 80, 190, 50, 50, 70, 40, 80, 240, 0, 282, 
	198, 260, 220, 40, 80, 52, 68, 190, 50, 42, 78, 50, 70, 242, 238, 250, 
	230, 190, 50, 40, 80, 40, 80, 200, 40, 50, 70, 50, 70, 240, 0, 242, 
	238, 260, 220, 230, 10, 260, 220, 400, 80, 270, 210, 432, 48, 320, 40, 50, 
	70, 220, 20, 270, 210, 250, 470, 310, 50, 42, 78, 240, 0, 270, 210, 260, 
	462, 308, 50, 50, 80, 270, 200, 240, 0, 270, 210, 242, 238, 260, 460, 300, 
	180, 162, 78, 40, 80, 40, 80, 190, 50, 50, 70, 40, 80, 240, 0, 282, 
	198, 260, 220, 40, 80, 52, 68, 190, 50, 42, 78, 50, 70, 242, 238, 250, 
	230, 190, 50, 40, 80, 40, 80, 200, 40, 50, 70, 50, 70, 240, 0, 242, 
	238, 260, 220, 230, 10, 260, 220, 400, 80, 270, 210, 432, 48, 320, 40, 50, 
	70, 220, 20, 270, 210, 250, 470, 310, 50, 42, 78, 240, 0, 270, 210, 260, 
	462, 308, 50, 50, 80, 270, 200, 240, 0, 270, 210, 242, 238, 260, 460, 300
};

// TRACK 2
const byte track2_notes[] PROGMEM = { 
	67, 128, 69, 128, 62, 128, 69, 128, 74, 128, 74, 128, 66, 128, 67, 128, 
	69, 128, 66, 128, 71, 128, 73, 128, 74, 128, 69, 128, 64, 128, 67, 128, 
	69, 128, 62, 128, 69, 128, 74, 128, 74, 128, 66, 128, 67, 128, 69, 128, 
	66, 128, 71, 128, 73, 128, 74, 128, 69, 128, 64, 128, 67, 128, 69, 128, 
	62, 128, 69, 128, 74, 128, 74, 128, 66, 128, 67, 128, 69, 128, 66, 128, 
	71, 128, 73, 128, 74, 128, 69, 128, 64, 128, 67, 128, 69, 128, 62, 128, 
	69, 128, 74, 128, 74, 128, 66, 128, 67, 128, 69, 128, 66, 128, 71, 128, 
	73, 128, 74, 128, 69, 128, 64, 128
};
const word track2_timeOffsets[] PROGMEM = { 
	2400, 260, 220, 200, 1000, 270, 210, 250, 1430, 232, 248, 232, 488, 230, 2410, 230, 
	250, 422, 1028, 252, 228, 410, 780, 240, 480, 240, 240, 250, 230, 420, 1980, 260, 
	220, 200, 1000, 270, 210, 250, 1430, 232, 248, 232, 488, 230, 2410, 230, 250, 422, 
	1028, 252, 228, 410, 780, 240, 480, 240, 240, 250, 230, 420, 1980, 260, 220, 200, 
	1000, 270, 210, 250, 1430, 232, 248, 232, 488, 230, 2410, 230, 250, 422, 1028, 252, 
	228, 410, 780, 240, 480, 240, 240, 250, 230, 420, 1980, 260, 220, 200, 1000, 270, 
	210, 250, 1430, 232, 248, 232, 488, 230, 2410, 230, 250, 422, 1028, 252, 228, 410, 
	780, 240, 480, 240, 240, 250, 230, 420
};

const SYNTH_TRACK tracks[] PROGMEM = {
	// TRACK 1
	{
		.notes = track1_notes,
		.timeOffsets = track1_timeOffsets,
		.noteCount = 384,
	},
	// TRACK 2
	{
		.notes = track2_notes,
		.timeOffsets = track2_timeOffsets,
		.noteCount = 120,
	},
};


void setup() {
	Synth.init(3);
}

void loop() {
	if (!Synth.isPlaying()) {
		delay(1000);
		Synth.play(tracks, 2, 16);
	} else {
		// Do something. ~3/5 ths of the CPU cycles are still available.
	}
}

