
#include <avr/pgmspace.h>
#include <Synth.h>

// Super Mario Bros. - Underworld

// TRACK 1
const byte track1_notes[] PROGMEM = { 
	48, 128, 60, 128, 45, 128, 57, 128, 46, 128, 58, 128, 48, 128, 60, 128, 
	45, 128, 57, 128, 46, 128, 58, 128, 41, 128, 53, 128, 38, 128, 50, 128, 
	39, 128, 51, 128, 41, 128, 53, 128, 38, 128, 50, 128, 39, 128, 51, 128, 
	51, 128, 50, 128, 49, 128, 48, 128, 51, 128, 50, 128, 44, 128, 43, 128, 
	49, 128, 48, 128, 54, 128, 53, 128, 52, 128, 58, 128, 57, 128, 56, 128, 
	51, 128, 47, 128, 46, 128, 45, 128, 44, 128
};
const word track1_timeOffsets[] PROGMEM = { 
	960, 60, 0, 60, 0, 60, 0, 60, 0, 60, 0, 60, 600, 60, 0, 60, 
	0, 60, 0, 60, 0, 60, 0, 60, 600, 60, 0, 60, 0, 60, 0, 60, 
	0, 60, 0, 60, 600, 60, 0, 60, 0, 60, 0, 60, 0, 60, 0, 60, 
	480, 40, 0, 40, 0, 40, 0, 60, 60, 60, 60, 60, 60, 60, 60, 60, 
	60, 60, 60, 40, 0, 40, 0, 40, 0, 40, 0, 40, 0, 40, 0, 60, 
	20, 60, 20, 60, 20, 60, 20, 60, 20, 60
};

// TRACK 2
const byte track2_notes[] PROGMEM = { 
	48, 128, 60, 128, 45, 128, 57, 128, 46, 128, 58, 128, 48, 128, 60, 128, 
	45, 128, 57, 128, 46, 128, 58, 128, 41, 128, 53, 128, 38, 128, 50, 128, 
	39, 128, 51, 128, 41, 128, 53, 128, 38, 128, 50, 128, 39, 128, 51, 128, 
	51, 128, 50, 128, 49, 128, 48, 128, 51, 128, 50, 128, 44, 128, 43, 128, 
	49, 128, 48, 128, 54, 128, 53, 128, 52, 128, 58, 128, 57, 128, 56, 128, 
	51, 128, 47, 128, 46, 128, 45, 128, 44, 128
};
const word track2_timeOffsets[] PROGMEM = { 
	960, 60, 0, 60, 0, 60, 0, 60, 0, 60, 0, 60, 600, 60, 0, 60, 
	0, 60, 0, 60, 0, 60, 0, 60, 600, 60, 0, 60, 0, 60, 0, 60, 
	0, 60, 0, 60, 600, 60, 0, 60, 0, 60, 0, 60, 0, 60, 0, 60, 
	480, 40, 0, 40, 0, 40, 0, 60, 60, 60, 60, 60, 60, 60, 60, 60, 
	60, 60, 60, 40, 0, 40, 0, 40, 0, 40, 0, 40, 0, 40, 0, 60, 
	20, 60, 20, 60, 20, 60, 20, 60, 20, 60
};

const SYNTH_TRACK tracks[] PROGMEM = {
	// TRACK 1
	{
		.notes = track1_notes,
		.timeOffsets = track1_timeOffsets,
		.noteCount = 90,
	},
	// TRACK 2
	{
		.notes = track2_notes,
		.timeOffsets = track2_timeOffsets,
		.noteCount = 90,
	},
};


void setup() {
	Synth.init(3);
}

void loop() {
	if (!Synth.isPlaying()) {
		delay(1000);
		Synth.play(tracks, 2, 28);
	} else {
		// Do something. ~3/5 ths of the CPU cycles are still available.
	}
}

